# Alembic — configuration (alembic.ini)
#
# Rôle (fonctionnel) :
# - Fichier de configuration d’Alembic (outil de migrations pour SQLAlchemy).
# - Indique où se trouvent les scripts de migration (dossier alembic/, env.py, versions/).
# - Configure le logging utilisé pendant l’exécution des commandes Alembic.
# - IMPORTANT : l’URL réelle de la base est souvent définie/surchargée dans alembic/env.py
#   (par exemple en lisant settings.DATABASE_URL_SYNC). La valeur sqlalchemy.url ci-dessous
#   sert surtout de valeur “placeholder” si env.py ne la remplace pas.
#
# Commandes typiques :
# - alembic revision --autogenerate -m "..."
# - alembic upgrade head
# - alembic downgrade -1

# Configuration générique pour une seule base de données.

[alembic]
# Chemin vers les scripts de migration.
# Généralement un chemin “POSIX” (slashes) relatif à %(here)s (le dossier de ce fichier ini).
script_location = %(here)s/alembic

# Modèle de nommage des fichiers de migration.
# Par défaut : %%(rev)s_%%(slug)s
# Pour préfixer par date/heure, décommenter et adapter :
# file_template = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s

# Chemin(s) à ajouter à sys.path avant import.
# Par défaut : dossier courant.
prepend_sys_path = .

# Timezone utilisée pour rendre la date dans les fichiers de migration.
# Nécessite la lib tzdata si activé (alembic[tz]).
# timezone =

# Longueur max du “slug” (partie texte du nom de migration).
# truncate_slug_length = 40

# Exécuter l’environnement pendant la commande revision, même sans autogenerate.
# revision_environment = false

# Autoriser les fichiers .pyc/.pyo sans source .py à être détectés comme révisions.
# sourceless = false

# Spécification d’emplacement(s) des versions de migration (si multi-dossiers).
# version_locations = %(here)s/alembic/versions

# Séparateur utilisé pour découper les listes de chemins (version_locations, prepend_sys_path).
# Valeur “os” => utilise le séparateur système (os.pathsep).
path_separator = os

# Recherche récursive des fichiers de versions (nouveau depuis Alembic 1.10).
# recursive_version_locations = false

# Encodage de sortie pour les scripts de migration générés.
# output_encoding = utf-8

# URL de base de données.
# Cette valeur est lue par env.py uniquement.
# En pratique, beaucoup de projets la remplacent via env.py (ex: settings.DATABASE_URL_SYNC).
sqlalchemy.url = driver://user:pass@localhost/dbname


[post_write_hooks]
# Hooks exécutés après génération d’une nouvelle migration (formatage / lint).
# Exemples (désactivés ici) :
# hooks = black
# black.type = console_scripts
# black.entrypoint = black
# black.options = -l 79 REVISION_SCRIPT_FILENAME
#
# hooks = ruff
# ruff.type = module
# ruff.module = ruff
# ruff.options = check --fix REVISION_SCRIPT_FILENAME


# Configuration du logging (utilisée aussi par env.py).

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARNING
handlers = console
qualname =

[logger_sqlalchemy]
level = WARNING
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
